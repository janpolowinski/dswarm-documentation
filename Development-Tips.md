A collection of tips for development.

### Explore Communication between Front End and Back End

The communication between the front end and the back end's RESTful API is based on json objects. You may use the Chrome web browser and its Developer Tools. (hint: a Developer Tools window displays details on the particular tab that was in focus when opening the developer tools.) The network perspective is pretty useful to inspect the communication to the d:swarm back end server. 

The _Headers_ tab of the developer tools gives an overview, e.g. which d:swarm API endpoint was requested, e.g. http://127.0.0.1:8087/dmp/resources on a local installation when opening the d:swarm [[Data Perspective|Glossary#data-perspective]].

The _Response_ tab of the developer tools contains data received from the d:swarm back end. Copy the JSON string and a) open http://jsbeautifier.org in a separate browser, paste the content and hit "Beautify ..." to get a human readable version of the response, or b) open http://jsonviewer.stack.hu and use the viewer to interactively explore the JSON.


### Back End Log Files 

When playing around with the [[front end]], open a terminal and use `tail -f` on one of the log files written to `datamanagement-platform/log` to observe whats happening in the [[back end]].


### Integration Tests for [[Metadata Repository|Glossary#metadata-repository]]

__Note__: This description is for testing the [[Metadata Repository|Glossary#metadata-repository]] only, no data is written to Neo4j!

For writing integration tests, have look at `org.dswarm.controller.resources.job.test.ProjectRemoveMappingResourceTest.testPUTProjectWithRemovedMapping()` as an example. The test simulates a user loading an already persisted project in front end, removing a mapping (that contains filters and functions) and saving the updated project (by putting the whole project JSON to the respective API end point). 

As a test basis, you first need to create a[[Project|Glossary#project]] with a [[Configuration|Glossary#configuration]], [[Data Model|Glossary#data-model]] etc. as a basis for your tests. One way to do so is to use the front end to create the project with mappings etc. and than intercept the JSON that is send to the back end and store it to simulate this request in your integration test. 

At the moment, you need to cope with dummy IDs to do so. The reason is that, e.g, when adding a [[Mapping|Glossary#mapping]] in the [[front end]], the front end has no knowledge about the ID (of this mapping) that will be generated by the [[back end]] ([[Metadata Repository|Glossary#metadata-repository]]). Therefore, the front end creates dummy IDs for all [[Entitys|Glossary#entity]] newly created. These will be replaced by valid IDs in the back end when processing the JSON of the request. 

Go through the following steps to create a custom project JSON with dummy IDs that can be used to initialize the data base.

1. have front end, back end, neo4j and mySQL running 
2. reset the database (not necessarily required but recommended to avoid confusion)
3. Open front end in Chrome and activate Developer Tools (see also [[Explore Communication|Development-Tips#explore-communication-between-front-end-and-back-end]]
4. Go to Import Perspective, import a Data Resource
5. Go to Data Perspective and configure the Data Resource
6. In Data Perspective, create a new Project. From here, __do not__ click save project until told to do so!
7. In Mapping Perspective, do everything you need as a basis for the integration test, e.g., select Output Data Model, add Mappings with Filters etc.
8. Click Save Project and notice the request in the Developer Tools. There should be something like `http://127.0.0.1:8087/dmp/projects/1` in the list. 
9. Select the element with _Request Method: PUT_ in the _Headers_. 
10. Below, go to _Request Payload_ and click _view source_. An unformatted block of JSON should be shown. Copy the whole JSON to clipboard.
11. Open http://jsbeautifier.org in a new tab, paste the JSON from clipboard, hit the beautify button and copy & paste the human readable JSON to a local file. This file may look like `datamanagement-platform/controller/src/test/resources/project_to_remove_mapping_from_with_original_IDs_and_output_data_model.json`